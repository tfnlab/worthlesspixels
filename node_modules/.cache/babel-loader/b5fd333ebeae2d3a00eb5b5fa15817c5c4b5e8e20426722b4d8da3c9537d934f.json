{"ast":null,"code":"import _createClass from \"/Users/armenmerikyan/Desktop/wd/tfnlab.com/metagascarnext/stage-presets-gltfjsx/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"/Users/armenmerikyan/Desktop/wd/tfnlab.com/metagascarnext/stage-presets-gltfjsx/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _assertThisInitialized from \"/Users/armenmerikyan/Desktop/wd/tfnlab.com/metagascarnext/stage-presets-gltfjsx/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/armenmerikyan/Desktop/wd/tfnlab.com/metagascarnext/stage-presets-gltfjsx/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/armenmerikyan/Desktop/wd/tfnlab.com/metagascarnext/stage-presets-gltfjsx/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Vector2, Group, Raycaster, Matrix4 } from 'three';\nvar _pointer = new Vector2();\nvar _event = {\n  type: '',\n  data: _pointer\n};\nvar InteractiveGroup = /*#__PURE__*/function (_Group) {\n  _inherits(InteractiveGroup, _Group);\n  var _super = _createSuper(InteractiveGroup);\n  function InteractiveGroup(renderer, camera) {\n    var _this;\n    _classCallCheck(this, InteractiveGroup);\n    _this = _super.call(this);\n    var scope = _assertThisInitialized(_this);\n    var raycaster = new Raycaster();\n    var tempMatrix = new Matrix4(); // Pointer Events\n\n    var element = renderer.domElement;\n    function onPointerEvent(event) {\n      event.stopPropagation();\n      _pointer.x = event.clientX / element.clientWidth * 2 - 1;\n      _pointer.y = -(event.clientY / element.clientHeight) * 2 + 1;\n      raycaster.setFromCamera(_pointer, camera);\n      var intersects = raycaster.intersectObjects(scope.children, false);\n      if (intersects.length > 0) {\n        var intersection = intersects[0];\n        var object = intersection.object;\n        var uv = intersection.uv;\n        _event.type = event.type;\n        _event.data.set(uv.x, 1 - uv.y);\n        object.dispatchEvent(_event);\n      }\n    }\n    element.addEventListener('pointerdown', onPointerEvent);\n    element.addEventListener('pointerup', onPointerEvent);\n    element.addEventListener('pointermove', onPointerEvent);\n    element.addEventListener('mousedown', onPointerEvent);\n    element.addEventListener('mouseup', onPointerEvent);\n    element.addEventListener('mousemove', onPointerEvent);\n    element.addEventListener('click', onPointerEvent); // WebXR Controller Events\n    // TODO: Dispatch pointerevents too\n\n    var events = {\n      move: 'mousemove',\n      select: 'click',\n      selectstart: 'mousedown',\n      selectend: 'mouseup'\n    };\n    function onXRControllerEvent(event) {\n      var controller = event.target;\n      tempMatrix.identity().extractRotation(controller.matrixWorld);\n      raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);\n      raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix);\n      var intersections = raycaster.intersectObjects(scope.children, false);\n      if (intersections.length > 0) {\n        var intersection = intersections[0];\n        var object = intersection.object;\n        var uv = intersection.uv;\n        _event.type = events[event.type];\n        _event.data.set(uv.x, 1 - uv.y);\n        object.dispatchEvent(_event);\n      }\n    }\n    var controller1 = renderer.xr.getController(0);\n    controller1.addEventListener('move', onXRControllerEvent);\n    controller1.addEventListener('select', onXRControllerEvent);\n    controller1.addEventListener('selectstart', onXRControllerEvent);\n    controller1.addEventListener('selectend', onXRControllerEvent);\n    var controller2 = renderer.xr.getController(1);\n    controller2.addEventListener('move', onXRControllerEvent);\n    controller2.addEventListener('select', onXRControllerEvent);\n    controller2.addEventListener('selectstart', onXRControllerEvent);\n    controller2.addEventListener('selectend', onXRControllerEvent);\n    return _this;\n  }\n  return _createClass(InteractiveGroup);\n}(Group);\nexport { InteractiveGroup };","map":{"version":3,"names":["Vector2","Group","Raycaster","Matrix4","_pointer","_event","type","data","InteractiveGroup","renderer","camera","scope","raycaster","tempMatrix","element","domElement","onPointerEvent","event","stopPropagation","x","clientX","clientWidth","y","clientY","clientHeight","setFromCamera","intersects","intersectObjects","children","length","intersection","object","uv","set","dispatchEvent","addEventListener","events","move","select","selectstart","selectend","onXRControllerEvent","controller","target","identity","extractRotation","matrixWorld","ray","origin","setFromMatrixPosition","direction","applyMatrix4","intersections","controller1","xr","getController","controller2"],"sources":["/Users/armenmerikyan/Desktop/wd/tfnlab.com/metagascarnext/stage-presets-gltfjsx/node_modules/@react-three/drei/node_modules/three-stdlib/interactive/InteractiveGroup.js"],"sourcesContent":["import { Vector2, Group, Raycaster, Matrix4 } from 'three';\n\nconst _pointer = new Vector2();\n\nconst _event = {\n  type: '',\n  data: _pointer\n};\n\nclass InteractiveGroup extends Group {\n  constructor(renderer, camera) {\n    super();\n    const scope = this;\n    const raycaster = new Raycaster();\n    const tempMatrix = new Matrix4(); // Pointer Events\n\n    const element = renderer.domElement;\n\n    function onPointerEvent(event) {\n      event.stopPropagation();\n      _pointer.x = event.clientX / element.clientWidth * 2 - 1;\n      _pointer.y = -(event.clientY / element.clientHeight) * 2 + 1;\n      raycaster.setFromCamera(_pointer, camera);\n      const intersects = raycaster.intersectObjects(scope.children, false);\n\n      if (intersects.length > 0) {\n        const intersection = intersects[0];\n        const object = intersection.object;\n        const uv = intersection.uv;\n        _event.type = event.type;\n\n        _event.data.set(uv.x, 1 - uv.y);\n\n        object.dispatchEvent(_event);\n      }\n    }\n\n    element.addEventListener('pointerdown', onPointerEvent);\n    element.addEventListener('pointerup', onPointerEvent);\n    element.addEventListener('pointermove', onPointerEvent);\n    element.addEventListener('mousedown', onPointerEvent);\n    element.addEventListener('mouseup', onPointerEvent);\n    element.addEventListener('mousemove', onPointerEvent);\n    element.addEventListener('click', onPointerEvent); // WebXR Controller Events\n    // TODO: Dispatch pointerevents too\n\n    const events = {\n      move: 'mousemove',\n      select: 'click',\n      selectstart: 'mousedown',\n      selectend: 'mouseup'\n    };\n\n    function onXRControllerEvent(event) {\n      const controller = event.target;\n      tempMatrix.identity().extractRotation(controller.matrixWorld);\n      raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);\n      raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix);\n      const intersections = raycaster.intersectObjects(scope.children, false);\n\n      if (intersections.length > 0) {\n        const intersection = intersections[0];\n        const object = intersection.object;\n        const uv = intersection.uv;\n        _event.type = events[event.type];\n\n        _event.data.set(uv.x, 1 - uv.y);\n\n        object.dispatchEvent(_event);\n      }\n    }\n\n    const controller1 = renderer.xr.getController(0);\n    controller1.addEventListener('move', onXRControllerEvent);\n    controller1.addEventListener('select', onXRControllerEvent);\n    controller1.addEventListener('selectstart', onXRControllerEvent);\n    controller1.addEventListener('selectend', onXRControllerEvent);\n    const controller2 = renderer.xr.getController(1);\n    controller2.addEventListener('move', onXRControllerEvent);\n    controller2.addEventListener('select', onXRControllerEvent);\n    controller2.addEventListener('selectstart', onXRControllerEvent);\n    controller2.addEventListener('selectend', onXRControllerEvent);\n  }\n\n}\n\nexport { InteractiveGroup };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}